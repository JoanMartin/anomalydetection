[tox]
package=anomalydetection
envlist = py35,flake8

[testenv:flake8]
passenv = *
deps = flake8
basepython = python3.5
commands = flake8 --max-line-length=90 --exclude=lib,bin,var,bower_components --verbose

[testenv:py35]
passenv = *
deps = mock
       nose
       coverage
       cython
commands = docker-compose down
           docker-compose up -d
           sleep 10
           nosetests --with-coverage --cover-package=anomalydetection --cover-html --cover-xml --with-xunit --xunit-file=xunit.xml
           docker-compose down
           rm /tmp/database.sqlite

[testenv:dev]
passenv = *
usedevelop=True
deps = mock
       nose
       coverage
       cython
commands = docker-compose down
           docker-compose up -d
           sleep 10
           nosetests --verbosity 99999 --nologcapture
           docker-compose down
           rm /tmp/database.sqlite

[testenv:docs]
basepython = python3.5
usedevelop=True
deps = sphinx
       sphinx-autodoc-typehints
       sphinx_rtd_theme
commands = sphinx-build -a docs/source/ docs/build/

